<html>
<head>
  <title>Election</title>
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular.min.js"></script>
  <script src="javascripts/app.js"></script>
</head>
<body ng-app="candidate" ng-controller="MainCtrl">
  
 <div ng-init="isLoggedIn = false" ng-if="!isLoggedIn">
  <div class="row" style="margin:20px">
  <div class="col-md-6 col-md-offset-3">
    <form ng-submit="login(formUsername)" style = "margin-top30px;">
      <input type="text" placeholder="Username" ng-model="formUsername"></input>
      <button type="submit">Login</button>
    </form>
  </div>
  </div>
 </div>
  
 <div ng-if="isLoggedIn">
  <div class="row" style="margin:20px">
  <div class="col-md-6 col-md-offset-3">
  <div class = "page-header">  
    <h1>The Candidates!</h1>
  </div>
    <form ng-submit="addCand()" style = "margin-top30px;">
      <input type="text" ng-model="formCand"></input>
      <button type="submit">Nominate A Candidate</button>
    </form>
    
  <div ng-repeat="candidate in candidates | orderBy: '-upvotes'">
    <span class="glyphicon glyphicon-thumbs-up" ng-click="incrementUpvotesCand(candidate)"></span>
      {{candidate.name}} - votes: {{candidate.upvotes}}
      
      <form ng-submit="addComment(candidate)" style = "margin-top30px;">
        <input type="text" placeholder="Your comment" ng-model="formContent"></input>
      </form>
      
      <div ng-init="isClicked = false" ng-if="!isClicked">
        <button type="submit">Add A Comment</button>
        
        <div ng-repeat="comment in commentMap.get(candidate.name)">
        <span class="glyphicon glyphicon-thumbs-up" ng-click="incrementUpvotesCom(comment)"></span>
        <span class="glyphicon glyphicon-remove" ng-if="username === comment.name" ng-click="delete(comment)"></span>
          {{comment.name}} - votes: {{comment.upvotes}}
        </div>
      </div>
  </div>
  
  </div>
  </div>
 </div>
 
</body>
</html>

